<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Hello</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link href="https://cdn.bootcss.com/bootstrap/4.1.1/css/bootstrap-grid.min.css" rel="stylesheet">
    <link href="https://cdn.bootcss.com/bootstrap/4.1.1/css/bootstrap-reboot.min.css" rel="stylesheet">
    <link href="https://cdn.bootcss.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.bootcss.com/bootstrap/4.1.1/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.bootcss.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
    <script src="http://res.wx.qq.com/open/js/jweixin-1.6.0.js"></script>
<script>
    $(function (){
        function onBridgeReady(){
            console.log("11")
            WeixinJSBridge.invoke(
                'getBrandWCPayRequest', {
                    // "appId":"${payInfo.appId}",     //公众号ID，由商户传入
                    // "timeStamp":"${payInfo.timeStamp}",         //时间戳，自1970年以来的秒数
                    // "nonceStr":"${payInfo.nonceStr}", //随机串
                    // "package":"${payInfo.package}",
                    // "signType":"${payInfo.signType}",         //微信签名方式：
                    // "paySign":"${payInfo.paySign}" //微信签名
                    "appId":"wx0fab838b1a9d4eb5",     //公众号ID，由商户传入
                    "timeStamp":"1395712654",         //时间戳，自1970年以来的秒数
                    "nonceStr":"e61463f8efa94090b1f366cccfbbb444", //随机串
                    "package":"prepay_id=u802345jgfjsdfgsdg888",
                    "signType":"MD5",         //微信签名方式：
                    "paySign":"70EA570631E4BB79628FBCA90534C63FF7FADD89" //微信签名
                },
                function(res){
                    console.log(res)
                    if(res.err_msg == "get_brand_wcpay_request:ok" ){
                        // 使用以上方式判断前端返回,微信团队郑重提示：
                        //res.err_msg将在用户支付成功后返回ok，但并不保证它绝对可靠。
                    }
                });
        }
        if (typeof WeixinJSBridge == "undefined"){
            if( document.addEventListener ){
                document.addEventListener('WeixinJSBridgeReady', onBridgeReady, false);
            }else if (document.attachEvent){
                document.attachEvent('WeixinJSBridgeReady', onBridgeReady);
                document.attachEvent('onWeixinJSBridgeReady', onBridgeReady);
            }
        }else{
            onBridgeReady();
        }
    })

</script>
</head>
<body>
Hello, <span th:text="${user.nickname}"></span>!
<br>
<br>
<br>
<div class="card" style="width: 10rem;">
    <img class="card-img-top" th:src="${user.headImgUrl}" alt="Card image cap">
    <div class="card-body">
        <h5 class="card-title" th:text="${user.nickname}"></h5>
        <p class="card-text"> openId： <span th:text="${user.openid}"></span></p>
<!--        ${payInfo.appId}-->
<!--        ${payInfo.timeStamp}-->
<!--        ${payInfo.nonceStr}-->
<!--        ${payInfo.package}-->
<!--        ${payInfo.signType}-->
<!--        ${payInfo.paySign}-->

        <!--        <p class="card-text"> 性别： <span th:text="${user.sexDesc}"></span></p>-->
<!--        <p class="card-text">城市： <span th:text="${user.city}"></span></p>-->
    </div>
</div>
</body>
</html>
